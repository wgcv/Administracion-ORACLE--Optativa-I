# Table Space

### Ver los table Space

select * from DBA_TABLESPACES;
 
 ### Ver fisicamente donde estan ubicados los table space
 
select * from dba_data_files;
 
select TABLESPACE_NAME, FILE_NAME, BYTES/(1024*1024) as MB from dba_data_files;

select TABLESPACE_NAME, FILE_NAME, BYTES/(1024*1024) as MB from dba_data_files GROUP BY TABLESPACE_NAME;

select TABLESPACE_NAME, sum(BYTES/(1024*1024)) as MB from dba_data_files GROUP BY TABLESPACE_NAME;


### Crear un Table Space

CREATE TABLESPACE TBS_TOPICOS DATAFILE 'C:\APP\SOPORTETECNICO\ORADATA\ORCL\TBS_TOPICOS.DBF' SIZE 5M;
CREATE TEMPORARY TABLESPACE TEMP2  TEMPFILE 'C:\APP\SOPORTETECNICO\ORADATA\ORCL\temp_02.DBF' SIZE 5M;

### Mover un Table Space
ALTER TABLESPACE userdata OFFLINE;
ALTER TABLESPACE userdata RENAME DATAFILE 'C:\APP\SOPORTETECNICO\ORADATA\ORCL\TBS_TOPICOS.DBF' TO 'C:\APP\SOPORTETECNICO\ORADATA\ORCL\TBS_TOPICOS_NUEVA_RUTA.DBF;

### Borrar un Table Space
DROP TABLESPACE userdata INCLUDING CONTENTS AND DATAFILES;

### Adicionar espacio a un TABLESPACE

ALTER TABLESPACE TBS_TOPICOS ADD DATAFILE 'C:\APP\SOPORTETECNICO\ORADATA\ORCL\TBS_TOPICOS_01.DBF' SIZE 10M;

ALTER DATABASE DATAFILE 'C:\APP\SOPORTETECNICO\ORADATA\ORCL\TBS_TOPICOS_01.DBF' RESIZE 7M;

### Consultar cuanto libre tiene un TABLESPACE

SELECT TABLESPACE_NAME, SUM(BYTES) FROM DBA_FREE_SPACE GROUP BY TABLESPACE_NAME;

## Poner en READ ONLY, ONLINE OFFLINE
ALTER TABLESPACE TBS_GUSTAVO READ ONLY;

ALTER TABLESPACE TBS_GUSTAVO READ WRITE;

ALTER TABLESPACE TBS_GUSTAVO OFFLINE;

ALTER TABLESPACE TBS_GUSTAVO ONLINE;

#### Ver los tables space temporales
SELECT TABLESPACE_NAME, FILE_NAME, BYTES/(1024*1024) MB FROM DBA_TEMP_FILES
#### Ver cual es el TableSpace Temporale
SELECT * FROM DATABASE_PROPERTIES;
#### Cambiar el TableSpace temporal por defecto
ALTER DATABASE DEFAULT TEMPORARY TABLESPACE TEMP2;

### Ver cuanto consume una tabla en disco (En el TABLESPACE)
SELECT bytes/(1024*1024) AS MB FROM DBA_segments where SEGMENT_NAME = 'PROFESOR'
